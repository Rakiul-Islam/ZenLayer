<!-- ColorPickerWindow.xaml -->
<Window x:Class="ZenLayer.ColorPickerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Color Picker" 
        WindowStyle="None"
        AllowsTransparency="True"
        Topmost="True"
        ShowInTaskbar="False"
        Background="Transparent"
        WindowState="Maximized"
        ResizeMode="NoResize"
        MouseMove="Window_MouseMove"
        KeyDown="Window_KeyDown">

    <Grid Name="MainGrid">
        <!-- Screenshot overlay -->
        <Image Name="ScreenshotOverlay" 
               Stretch="Fill"
               RenderOptions.BitmapScalingMode="HighQuality"/>

        <Canvas Name="PickerCanvas" Background="Transparent" MouseLeftButtonDown="Canvas_MouseLeftButtonDown">
            <!-- Magnifier Glass -->
            <Border Name="MagnifierBorder"
                    Width="200"
                    Height="200"
                    CornerRadius="100"
                    BorderBrush="White"
                    BorderThickness="3"
                    Background="Black"
                    Visibility="Collapsed"
                    Panel.ZIndex="10">

                <Border.Effect>
                    <DropShadowEffect Color="Black" BlurRadius="20" ShadowDepth="5" Opacity="0.8"/>
                </Border.Effect>

                <Grid>
                    <!-- Magnified view -->
                    <Image Name="MagnifiedImage" 
                           Stretch="None"
                           RenderOptions.BitmapScalingMode="NearestNeighbor"/>

                    <!-- Center crosshair -->
                    <Canvas>
                        <Line X1="100" Y1="90" X2="100" Y2="110" 
                              Stroke="White" StrokeThickness="2"/>
                        <Line X1="90" Y1="100" X2="110" Y2="100" 
                              Stroke="White" StrokeThickness="2"/>
                    </Canvas>
                </Grid>
            </Border>

            <!-- Color Info Panel -->
            <Border Name="ColorInfoPanel"
                    Background="#2C3E50"
                    CornerRadius="10"
                    Padding="15"
                    Visibility="Collapsed"
                    Panel.ZIndex="10">

                <Border.Effect>
                    <DropShadowEffect Color="Black" BlurRadius="15" ShadowDepth="5" Opacity="0.6"/>
                </Border.Effect>

                <StackPanel>
                    <!-- Color Preview -->
                    <Rectangle Name="ColorPreview" 
                               Width="80" 
                               Height="40" 
                               Stroke="White" 
                               StrokeThickness="2"
                               Margin="0,0,0,10"/>

                    <!-- Color Values -->
                    <TextBlock Name="HexValue" 
                               Text="#000000" 
                               Foreground="White" 
                               FontFamily="Consolas"
                               FontSize="14"
                               FontWeight="Bold"
                               Margin="0,2"/>

                    <TextBlock Name="RgbValue" 
                               Text="RGB(0, 0, 0)" 
                               Foreground="White" 
                               FontFamily="Consolas"
                               FontSize="12"
                               Margin="0,2"/>

                    <TextBlock Name="HslValue" 
                               Text="HSL(0, 0%, 0%)" 
                               Foreground="White" 
                               FontFamily="Consolas"
                               FontSize="12"
                               Margin="0,2"/>

                    <!-- Action Buttons -->
                    <StackPanel Orientation="Horizontal" 
                                HorizontalAlignment="Center"
                                Margin="0,10,0,0">

                        <Button Name="CopyHexButton" 
                                Content="Copy HEX"
                                Background="#3498DB"
                                Foreground="White"
                                BorderThickness="0"
                                Padding="10,5"
                                Margin="5"
                                Cursor="Hand"
                                Click="CopyHex_Click"/>

                        <Button Name="CopyRgbButton" 
                                Content="Copy RGB"
                                Background="#9B59B6"
                                Foreground="White"
                                BorderThickness="0"
                                Padding="10,5"
                                Margin="5"
                                Cursor="Hand"
                                Click="CopyRgb_Click"/>

                        <Button Name="CloseButton" 
                                Content="Close"
                                Background="#E74C3C"
                                Foreground="White"
                                BorderThickness="0"
                                Padding="10,5"
                                Margin="5"
                                Cursor="Hand"
                                Click="Close_Click"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Instructions -->
            <TextBlock Name="InstructionText"
                       Text="Move mouse to pick colors • Click to select and fix panel • ESC to exit"
                       Foreground="White"
                       Background="#2C3E50"
                       Padding="15,8"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Top"
                       Margin="0,50,0,0"
                       FontSize="14"
                       FontWeight="SemiBold"
                       Panel.ZIndex="5">

                <TextBlock.Effect>
                    <DropShadowEffect Color="Black" BlurRadius="10" ShadowDepth="3" Opacity="0.8"/>
                </TextBlock.Effect>
            </TextBlock>

            <!-- Crosshair at click position -->
            <Canvas Name="ClickIndicator" Visibility="Collapsed" Panel.ZIndex="8">
                <Ellipse Name="ClickCircle" 
                         Width="20" 
                         Height="20" 
                         Stroke="Yellow" 
                         StrokeThickness="3" 
                         Fill="Transparent"/>
                <Line Name="ClickCrossV" 
                      X1="10" Y1="0" X2="10" Y2="20" 
                      Stroke="Yellow" 
                      StrokeThickness="2"/>
                <Line Name="ClickCrossH" 
                      X1="0" Y1="10" X2="20" Y2="10" 
                      Stroke="Yellow" 
                      StrokeThickness="2"/>
            </Canvas>
        </Canvas>
    </Grid>
</Window>